# MidLab - 今後のロードマップ

## 概要

MidLab v1.0 リリース後の中長期開発計画。
ユーザーフィードバックと市場動向に応じて優先度を調整する。

---

## フェーズ A: リリース直後（v1.0 リリース後 1〜2ヶ月）

### A-1. 安定化・モニタリング
- [ ] クラッシュレポート監視体制の構築（Sentry 導入検討）
- [ ] ストアレビュー確認・返信の定期運用
- [ ] RevenueCat ダッシュボードでのサブスクリプション状況監視
- [ ] 致命的バグの迅速な修正・ホットフィックスリリース

### A-2. ユーザーフィードバック収集
- [ ] ストアレビューからの要望・不満の整理
- [ ] アプリ内フィードバック機能の追加（簡易メールフォーム）
- [ ] 初期ユーザーの利用パターン分析（ローカル分析のみ）

### A-3. 初期改善
- [ ] UI/UX の微調整（フィードバックに基づく）
- [ ] パフォーマンス最適化（起動時間・メモリ使用量）
- [ ] アプリアイコンの改善（nanobanana で再生成）

---

## フェーズ B: 基盤強化（v1.1〜v1.3）

### B-1. アカウント機能の導入
- [ ] Supabase 認証の有効化（メール/パスワード）
- [ ] Apple ログイン・Google ログインの追加
- [ ] アカウント作成・ログイン・ログアウト画面の実装
- [ ] アカウント削除機能（Apple 審査要件）
- [ ] 既存ローカルデータのアカウント紐付け移行フロー

### B-2. クラウド同期
- [ ] Supabase データベーススキーマ設計
  - プロフィール / ETPテスト結果 / トレーニング計画 / ワークアウトログ
- [ ] ローカル ↔ クラウド双方向同期ロジック
- [ ] コンフリクト解決戦略の実装（タイムスタンプベース）
- [ ] マルチデバイス対応（iPhone + iPad 間のデータ共有）
- [ ] オフライン対応（ネットワーク不通時のキュー処理）

### B-3. データバックアップ
- [ ] 手動エクスポート機能（JSON / CSV）
- [ ] 手動インポート機能（端末移行用）
- [ ] 自動バックアップ（クラウド同期と連携）

---

## フェーズ C: トレーニング機能の拡充（v1.4〜v2.0）

### C-1. ワークアウト実行サポート
- [ ] ワークアウトタイマー（インターバル/レスト/レップ管理）
- [ ] 音声ガイダンス（次のインターバルの通知）
- [ ] バックグラウンド実行対応
- [ ] Apple Watch / Wear OS 連携（将来検討）

### C-2. 高度な分析機能
- [ ] eTP 推移グラフの強化（期間別・フェーズ別表示）
- [ ] トレーニング負荷トラッキング（週間/月間の走行距離・強度）
- [ ] リミッター改善度の可視化（テスト結果の比較分析）
- [ ] 疲労度・コンディション指標の導入
- [ ] レース結果記録・目標達成度の表示

### C-3. トレーニング計画の高度化
- [ ] カスタムワークアウト作成機能
- [ ] ワークアウトの手動入れ替え・調整
- [ ] 天候・体調に応じた当日の代替メニュー提案
- [ ] 練習日の柔軟なスケジュール変更
- [ ] 複数レース対応（シーズン全体の期分け計画）

### C-4. ワークアウトテンプレート拡充
- [ ] 追加ワークアウトメニュー
  - 400m × 8〜12 インターバル
  - 600m × 6 インターバル
  - 変則インターバル（300-500-700-500-300）
  - ファルトレク
  - 坂道トレーニング
- [ ] ワークアウト強度のカスタム調整

---

## フェーズ D: 外部連携（v2.1〜v2.5）

### D-1. GPS・ランニングアプリ連携
- [ ] Strava API 連携（ワークアウト自動インポート）
- [ ] Garmin Connect 連携
- [ ] Apple HealthKit 連携（心拍数・走行距離）
- [ ] Google Fit 連携

### D-2. ウェアラブル対応
- [ ] Apple Watch コンパニオンアプリ（ワークアウト表示・タイマー）
- [ ] リアルタイム心拍ゾーン表示
- [ ] Bluetooth 心拍センサー対応（ANT+/BLE）

### D-3. データ共有
- [ ] トレーニング結果の SNS 共有機能（画像生成）
- [ ] コーチへの進捗レポート共有（PDF/画像）

---

## フェーズ E: ソーシャル・コミュニティ（v3.0〜）

### E-1. コーチング機能
- [ ] コーチ ↔ 選手のペアリング
- [ ] コーチ向けダッシュボード（複数選手の進捗一覧）
- [ ] トレーニング計画のコーチ承認フロー
- [ ] コーチからのコメント・アドバイス機能

### E-2. チーム・グループ機能
- [ ] チーム作成・メンバー招待
- [ ] チーム内トレーニングログの共有
- [ ] チーム目標の設定・進捗表示
- [ ] 練習メニューのチーム配信

### E-3. コミュニティ
- [ ] ランキング・リーダーボード（eTP、走行距離等）
- [ ] チャレンジイベント（期間限定の目標設定）

---

## フェーズ F: 収益拡大・プラットフォーム展開（v3.x〜）

### F-1. 課金プランの拡充
- [ ] コーチプラン（月額制、複数選手管理）
- [ ] チームプラン（学校・クラブ向け一括契約）
- [ ] 買い切りオプション検討

### F-2. 多言語対応
- [ ] 英語ローカライズ完全対応（UI 全体）
- [ ] 中国語（簡体字）対応
- [ ] スペイン語対応
- [ ] ローカライズ管理基盤の構築（i18n フレームワーク導入）

### F-3. Web 版
- [ ] React Native Web による Web アプリ対応
- [ ] PCブラウザでのトレーニング計画確認・管理
- [ ] コーチ向け Web ダッシュボード

### F-4. その他の対象距離への展開
- [ ] 800m 未満の短距離（400m）対応検討
- [ ] 3000m〜5000m 中長距離への本格対応
- [ ] 3000m 障害（SC）対応

---

## 技術的な改善計画

### インフラ・アーキテクチャ
- [ ] Sentry によるエラー監視・パフォーマンスモニタリング導入
- [ ] OTA アップデート（EAS Update）の活用
- [ ] CI/CD パイプラインの整備（GitHub Actions + EAS Build）
- [ ] E2E テスト（Maestro）の自動化・CI 統合
- [ ] テストカバレッジの向上（現状 92 件 → 目標 200 件以上）

### コード品質
- [ ] ESLint + Prettier の厳格化
- [ ] React Native の新アーキテクチャ（Fabric / TurboModules）への移行検討
- [ ] Zustand ストアの分割（機能別スライス化）
- [ ] API レイヤーの抽象化（将来の外部連携に備える）

### セキュリティ
- [ ] Supabase Row Level Security (RLS) の設計・適用
- [ ] API キーのセキュア管理の強化
- [ ] データ暗号化（ローカル保存データ）

---

## 優先度マトリクス

| 優先度 | フェーズ | 概要 | リリース目安 |
|--------|---------|------|-------------|
| 🔴 最高 | A | 安定化・モニタリング | v1.0 直後 |
| 🟠 高 | B | アカウント・クラウド同期 | v1.1〜v1.3 |
| 🟡 中 | C | トレーニング機能拡充 | v1.4〜v2.0 |
| 🟢 低 | D | 外部連携 | v2.1〜v2.5 |
| 🔵 将来 | E, F | ソーシャル・プラットフォーム展開 | v3.0〜 |

---

## KPI（主要指標）

### ユーザー指標
- DAU / MAU（日次/月次アクティブユーザー）
- ユーザーリテンション率（1日/7日/30日）
- ETP テスト実施回数
- トレーニング計画完遂率

### 収益指標
- サブスクリプション契約数
- MRR（月次経常収益）
- チャーンレート（解約率）
- 無料 → 有料コンバージョン率
- LTV（顧客生涯価値）

### 品質指標
- アプリストア評価（目標: 4.5 以上）
- クラッシュフリーレート（目標: 99.5% 以上）
- アプリ起動時間（目標: 2 秒以内）

---

## 備考

- 各フェーズの開始はユーザーフィードバックと収益状況に基づいて判断する
- フェーズ B（アカウント機能）は Supabase スケルトンが既に実装済みのため、比較的スムーズに着手可能
- 外部連携（フェーズ D）は各 API の利用料金・制約を事前に調査してから着手する
- ロードマップは四半期ごとに見直しを行い、優先度を再評価する
